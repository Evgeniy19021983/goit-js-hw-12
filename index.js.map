{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nlet gallery = document.querySelector(\".gallery\");\r\n\r\nconst lightbox = new SimpleLightbox('.gallery a', {\r\n    captionsData: 'alt',\r\n    captionDelay: 250,\r\n});\r\n\r\nexport function createGallery(images) {\r\n    const markup = images.map((image) => {\r\n        return `<li class=\"gallery-element\">\r\n                    <a href=\"${image.largeImageURL}\">\r\n                        <img src=${image.webformatURL} class=\"gallery-img\" alt=${image.tags}>\r\n                    </a>\r\n                    <ul class=\"gallery-list\">\r\n                        <li class=\"gallery-list-column\">\r\n                            <p class=\"gallery-list-title\">Likes</p>\r\n                            <p class=\"gallery-list-counter\">${image.likes}</p>\r\n                        </li>\r\n                        <li class=\"gallery-list-column\">\r\n                            <p class=\"gallery-list-title\">Views</p>\r\n                            <p class=\"gallery-list-counter\">${image.views}</p>\r\n                        </li>\r\n                        <li class=\"gallery-list-column\">\r\n                            <p class=\"gallery-list-title\">Comments</p>\r\n                            <p class=\"gallery-list-counter\">${image.comments}</p>\r\n                        </li>\r\n                        <li class=\"gallery-list-column\">\r\n                            <p class=\"gallery-list-title\">Downloads</p>\r\n                            <p class=\"gallery-list-counter\">${image.downloads}</p>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n        `;\r\n    }).join(\"\");\r\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\r\n    lightbox.refresh();\r\n}\r\n\r\nexport function clearGallery() {\r\n    gallery.innerHTML = \"\";\r\n}\r\n\r\nexport function showLoader() {\r\n    document.querySelector(\".loader\").style.display = \"block\";\r\n}\r\n\r\nexport function hideLoader() {\r\n    document.querySelector(\".loader\").style.display = \"none\";\r\n}\r\n\r\nexport function showLoadMoreButton() {\r\n    document.querySelector(\".load-button\").style.display = \"block\";\r\n}\r\n\r\nexport function hideLoadMoreButton() {\r\n    document.querySelector(\".load-button\").style.display = \"none\";\r\n}","import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"https://pixabay.com/api\";\r\n\r\nexport async function getImagesByQuery(query, page) {\r\n    const response = await axios.get(\"/\", {\r\n        params: {\r\n            key: \"51714412-e915f386459e3059438f942fd\",\r\n            q: query,\r\n            image_type: \"photo\",\r\n            orientation: \"horizontal\",\r\n            safesearch: true,\r\n            per_page: 15,\r\n            page: page\r\n        }\r\n    });\r\n    const { hits, totalHits } = response.data;\r\n    return { hits, totalHits };\r\n}\r\n","import { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\r\nimport { getImagesByQuery } from \"./js/pixabay-api\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\n\r\nlet form = document.querySelector(\".form\");\r\nform.addEventListener(\"submit\", submitForm);\r\nlet line = \"\";\r\nlet page = 1;\r\nlet totalPage = 1\r\n\r\nlet button = document.querySelector(\".load-button\");\r\n\r\nasync function submitForm(event) {\r\n    event.preventDefault();\r\n    let formData = new FormData(form);\r\n    let value = formData.get('search-text').trim();\r\n\r\n    if (value == \"\") {\r\n        iziToast.error({\r\n            title: 'Error',\r\n            message: 'request can`t be empty'\r\n        });\r\n        return;\r\n    }\r\n    if (line == value) {\r\n        return;\r\n    }\r\n    line = value;\r\n    page = 1;\r\n    totalPage = 1;\r\n\r\n    clearGallery();\r\n\r\n    addElements();\r\n}\r\n\r\nbutton.addEventListener(\"click\", addElements);\r\n\r\nasync function addElements() {\r\n    hideLoadMoreButton();\r\n    showLoader();\r\n\r\n    try {\r\n        const { hits, totalHits } = await getImagesByQuery(line, page);\r\n\r\n        if (!hits.length) {\r\n            iziToast.error({\r\n                title: 'Error',\r\n                message: 'Sorry, there are no images matching your search query. Please try again!',\r\n            });\r\n            return;\r\n        }\r\n\r\n        totalPage = Math.ceil(totalHits / 15);\r\n        createGallery(hits);\r\n\r\n        if (page < totalPage) {\r\n            showLoadMoreButton();\r\n        } else {\r\n            iziToast.show({\r\n                title: 'END',\r\n                message: \"We're sorry, but you've reached the end of search results.\",\r\n            });\r\n        }\r\n        page++;\r\n\r\n        const firstItem = document.querySelector(\".gallery li:first-child\");\r\n        if (firstItem) {\r\n            window.scrollBy({\r\n                top: firstItem.getBoundingClientRect().height * 2,\r\n                behavior: \"smooth\",\r\n            });\r\n        }\r\n\r\n    } catch (error) {\r\n        iziToast.error({\r\n            title: 'Error',\r\n            message: `${error.message || error}`,\r\n        });\r\n    } finally {\r\n        hideLoader();\r\n    }\r\n}"],"names":["gallery","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","axios","getImagesByQuery","query","page","response","hits","totalHits","form","submitForm","line","totalPage","button","event","value","iziToast","addElements","firstItem","error"],"mappings":"owBAGA,IAAIA,EAAU,SAAS,cAAc,UAAU,EAE/C,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAKE,GAChB;AAAA,+BACgBA,EAAM,aAAa;AAAA,mCACfA,EAAM,YAAY,4BAA4BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,8DAK7BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,8DAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,8DAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,8DAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAKxE,EAAE,KAAK,EAAE,EACVN,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CJ,EAAS,QAAO,CACpB,CAEO,SAASM,GAAe,CAC3BP,EAAQ,UAAY,EACxB,CAEO,SAASQ,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OACtD,CAEO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,MACtD,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,OAC3D,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,MAC3D,CCzDAC,EAAM,SAAS,QAAU,0BAElB,eAAeC,EAAiBC,EAAOC,EAAM,CAChD,MAAMC,EAAW,MAAMJ,EAAM,IAAI,IAAK,CAClC,OAAQ,CACJ,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACT,CAAK,EACK,CAAE,KAAAE,EAAM,UAAAC,GAAcF,EAAS,KACrC,MAAO,CAAE,KAAAC,EAAM,UAAAC,EACnB,CCZA,IAAIC,EAAO,SAAS,cAAc,OAAO,EACzCA,EAAK,iBAAiB,SAAUC,CAAU,EAC1C,IAAIC,EAAO,GACPN,EAAO,EACPO,EAAY,EAEZC,EAAS,SAAS,cAAc,cAAc,EAElD,eAAeH,EAAWI,EAAO,CAC7BA,EAAM,eAAc,EAEpB,IAAIC,EADW,IAAI,SAASN,CAAI,EACX,IAAI,aAAa,EAAE,KAAI,EAE5C,GAAIM,GAAS,GAAI,CACbC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,wBACrB,CAAS,EACD,MACH,CACGL,GAAQI,IAGZJ,EAAOI,EACPV,EAAO,EACPO,EAAY,EAEZf,IAEAoB,IACJ,CAEAJ,EAAO,iBAAiB,QAASI,CAAW,EAE5C,eAAeA,GAAc,CACzBhB,IACAH,IAEA,GAAI,CACA,KAAM,CAAE,KAAAS,EAAM,UAAAC,CAAW,EAAG,MAAML,EAAiBQ,EAAMN,CAAI,EAE7D,GAAI,CAACE,EAAK,OAAQ,CACdS,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACzB,CAAa,EACD,MACH,CAEDJ,EAAY,KAAK,KAAKJ,EAAY,EAAE,EACpCf,EAAcc,CAAI,EAEdF,EAAOO,EACPZ,IAEAgB,EAAS,KAAK,CACV,MAAO,MACP,QAAS,4DACzB,CAAa,EAELX,IAEA,MAAMa,EAAY,SAAS,cAAc,yBAAyB,EAC9DA,GACA,OAAO,SAAS,CACZ,IAAKA,EAAU,sBAAuB,EAAC,OAAS,EAChD,SAAU,QAC1B,CAAa,CAGR,OAAQC,EAAO,CACZH,EAAS,MAAM,CACX,MAAO,QACP,QAAS,GAAGG,EAAM,SAAWA,CAAK,EAC9C,CAAS,CACT,QAAc,CACNpB,GACH,CACL"}